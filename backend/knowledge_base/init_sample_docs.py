"""
知识库初始化示例脚本
用于首次创建知识库时添加示例文档
"""
import sys
from pathlib import Path

# 添加项目路径
sys.path.insert(0, str(Path(__file__).parent.parent))

from services.knowledge_base import knowledge_base


def init_sample_documents():
    """初始化示例文档"""
    
    print("正在初始化知识库示例文档...")
    
    # 示例文档1：高血压管理
    doc1_id = knowledge_base.add_document(
        title="高血压患者健康管理指南",
        content="""
# 高血压患者健康管理指南

## 什么是高血压
高血压是指血压持续高于正常值的疾病。正常血压应低于120/80 mmHg。

## 饮食建议
1. 控制盐分摄入：每天不超过6克盐
2. 多吃新鲜蔬果：每天至少5份
3. 减少脂肪摄入：避免高脂食物
4. 适量蛋白质：选择瘦肉、鱼类

## 生活方式
- 规律运动：每天散步30分钟以上
- 充足睡眠：保证7-8小时睡眠
- 戒烟限酒：完全戒烟，限制饮酒
- 情绪管理：保持心情平和

## 监测要点
- 每天早晚各测一次血压
- 记录血压数据
- 定期复诊检查

## 注意事项
如果出现以下情况，请立即就医：
- 血压超过180/120 mmHg
- 剧烈头痛
- 胸痛、胸闷
- 呼吸困难
        """,
        doc_type="guide",
        source="医疗健康指南"
    )
    print(f"✓ 已添加文档1: {doc1_id}")
    
    # 示例文档2：糖尿病管理
    doc2_id = knowledge_base.add_document(
        title="老年人糖尿病管理",
        content="""
# 老年人糖尿病管理

## 血糖控制目标
- 空腹血糖：4.4-7.0 mmol/L
- 餐后2小时：<10.0 mmol/L
- 糖化血红蛋白：<7.0%

## 饮食管理
1. 定时定量：规律进餐，控制总量
2. 粗细搭配：适量粗粮，控制精米精面
3. 低糖饮食：避免高糖食物和饮料
4. 多食蔬菜：增加膳食纤维摄入

## 运动建议
- 餐后散步：饭后30分钟开始
- 有氧运动：每周至少150分钟
- 力量训练：每周2-3次
- 注意安全：避免低血糖

## 用药注意
- 按时服药：严格按照医嘱
- 监测血糖：定期检测血糖水平
- 注意低血糖：备好糖果或饼干

## 并发症预防
定期检查：
- 眼部检查：每年1次
- 肾功能检查：每半年1次
- 足部检查：每3个月1次
        """,
        doc_type="guide",
        source="糖尿病管理指南"
    )
    print(f"✓ 已添加文档2: {doc2_id}")
    
    # 示例文档3：常见症状
    doc3_id = knowledge_base.add_document(
        title="老年人常见健康问题",
        content="""
# 老年人常见健康问题及处理

## 头晕
常见原因：
- 血压波动
- 血糖异常
- 颈椎问题
- 睡眠不足

处理建议：
- 缓慢起身，避免突然动作
- 保证充足睡眠
- 监测血压血糖
- 症状持续需就医

## 失眠
改善方法：
- 规律作息，固定睡觉时间
- 睡前放松，避免刺激性活动
- 改善睡眠环境
- 适当运动

## 关节疼痛
注意事项：
- 适当休息，避免过度劳累
- 热敷缓解疼痛
- 保持适当体重
- 严重时需就医

## 记忆下降
预防措施：
- 多动脑，保持学习
- 社交活动
- 规律运动
- 充足睡眠

## 紧急情况
以下情况需立即就医：
- 剧烈胸痛
- 意识不清
- 呼吸困难
- 大出血
        """,
        doc_type="faq",
        source="健康知识库"
    )
    print(f"✓ 已添加文档3: {doc3_id}")
    
    print("\n知识库初始化完成！")
    print(f"共添加 {len(knowledge_base.list_documents())} 个文档")


if __name__ == "__main__":
    init_sample_documents()


