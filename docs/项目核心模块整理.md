# æ™ºèƒ½è¯Šæ–­ç³»ç»Ÿ - æ ¸å¿ƒæ¨¡å—æ•´ç†

## é¡¹ç›®ç»“æ„æ¦‚è§ˆ

```
health_assessment_system/
â”œâ”€â”€ æ•°æ®å±‚/                    # æ•°æ®å¤„ç†æ ¸å¿ƒ
â”œâ”€â”€ æ•°æ®ç”Ÿæˆ/                  # è™šæ‹Ÿæ•°æ®ç”Ÿæˆ
â”œâ”€â”€ core/                      # æ ¸å¿ƒå¼•æ“
â”œâ”€â”€ modules/                   # åŠŸèƒ½æ¨¡å—
â”œâ”€â”€ agents/                    # AIæ™ºèƒ½ä½“
â””â”€â”€ web_digital_human/         # WebæœåŠ¡+è¯­éŸ³
```

---

# ä¸€ã€æ•°æ®å¤„ç†éƒ¨åˆ†

## 1.1 æ ¸å¿ƒæ–‡ä»¶

| æ–‡ä»¶è·¯å¾„ | åŠŸèƒ½ | æ ¸å¿ƒç±» |
|----------|------|--------|
| `core/data_pipeline.py` | æ•°æ®é‡‡é›†+æ¸…æ´— | `DataCollector`, `DataCleaner`, `DataPipeline` |
| `core/health_data_service.py` | æ•°æ®æœåŠ¡å±‚ | `HealthDataService` |
| `modules/data_preparation.py` | ç‰¹å¾å·¥ç¨‹ | `DataPreprocessor`, `FeatureEngineer` |
| `core/database_manager.py` | æ•°æ®åº“ç®¡ç† | `DatabaseManager` |

## 1.2 æ•°æ®å¤„ç†æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          æ•°æ®é‡‡é›†å±‚                                  â”‚
â”‚  ä¼ æ„Ÿå™¨ â†’ æ‰‹åŠ¨è¾“å…¥ â†’ æ‰¹é‡å¯¼å…¥ â†’ APIè°ƒç”¨ â†’ æ•°æ®åº“                     â”‚
â”‚                         â†“                                           â”‚
â”‚                   DataCollector                                     â”‚
â”‚                   RawDataRecord                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          æ•°æ®æ¸…æ´—å±‚                                  â”‚
â”‚  â‘  å»é‡ â†’ â‘¡ å¼‚å¸¸å€¼æ£€æµ‹(IQR/Z-score) â†’ â‘¢ ç¼ºå¤±å€¼å¡«å…… â†’ â‘£ æ ‡å‡†åŒ–       â”‚
â”‚                         â†“                                           â”‚
â”‚                   DataCleaner                                       â”‚
â”‚                   CleanedDataRecord + DataQualityReport             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          æ•°æ®å¤„ç†å±‚                                  â”‚
â”‚  ç‰¹å¾å·¥ç¨‹: å‡å€¼/æ ‡å‡†å·®/è¶‹åŠ¿/å˜å¼‚ç³»æ•°/è¾¾æ ‡ç‡                          â”‚
â”‚                         â†“                                           â”‚
â”‚  å¥åº·è¯„ä¼°: è¡€å‹/è¡€ç³–/å¿ƒç‡/ç¡çœ /è¿åŠ¨ â†’ ç»¼åˆè¯„åˆ†                       â”‚
â”‚                         â†“                                           â”‚
â”‚                   ProcessedHealthFeatures                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 1.3 å…³é”®ä»£ç ç¤ºä¾‹

```python
# ä½¿ç”¨æ•°æ®ç®¡é“
from core.data_pipeline import get_pipeline, DataSource

pipeline = get_pipeline()

# é‡‡é›†æ•°æ®
pipeline.collect(
    user_id="elderly_001",
    data_type="blood_pressure",
    values={"systolic": 135, "diastolic": 85},
    source=DataSource.MANUAL
)

# æ¸…æ´—æ•°æ®
cleaned_data, quality_report = pipeline.clean(
    user_id="elderly_001",
    data_type="blood_pressure",
    days=30
)

print(f"æ•°æ®è´¨é‡è¯„åˆ†: {quality_report.quality_score}")
```

## 1.4 æ”¯æŒçš„æ•°æ®ç±»å‹

| ç±»å‹ | å­—æ®µ | æœ‰æ•ˆèŒƒå›´ |
|------|------|----------|
| blood_pressure | systolic, diastolic | 70-200, 40-130 mmHg |
| glucose | value, test_type | 2.0-30.0 mmol/L |
| heart_rate | value | 35-200 bpm |
| sleep | duration, deep_sleep | 0-16 å°æ—¶ |
| steps | value, distance | 0-100000 æ­¥ |
| weight | value, bmi | 30-150 kg |
| temperature | value | 35.0-42.0 Â°C |
| spo2 | value | 70-100 % |

---

# äºŒã€AIæ™ºèƒ½ä½“éƒ¨åˆ†

## 2.1 æ ¸å¿ƒæ–‡ä»¶

| æ–‡ä»¶è·¯å¾„ | åŠŸèƒ½ | æ ¸å¿ƒç±» |
|----------|------|--------|
| `agents/base_agent.py` | æ™ºèƒ½ä½“åŸºç±» | `BaseAgent` |
| `agents/multi_agent_system.py` | å¤šæ™ºèƒ½ä½“ç³»ç»Ÿ | `MultiAgentSystem` |
| `agents/agent_coordinator.py` | æ™ºèƒ½ä½“åè°ƒå™¨ | `AgentCoordinator` |
| `agents/chronic_disease_expert.py` | æ…¢ç—…ä¸“å®¶ | `ChronicDiseaseExpert` |
| `agents/emotional_care.py` | æƒ…æ„Ÿå…³æ€€ | `EmotionalCareAgent` |
| `agents/health_butler.py` | å¥åº·ç®¡å®¶ | `HealthButler` |
| `agents/lifestyle_coach.py` | ç”Ÿæ´»æ–¹å¼æ•™ç»ƒ | `LifestyleCoach` |

## 2.2 æ™ºèƒ½ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      MultiAgentSystem                               â”‚
â”‚                            â”‚                                        â”‚
â”‚                   AgentCoordinator                                  â”‚
â”‚                       (è·¯ç”±åˆ†å‘)                                     â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚            â†“          â†“          â†“          â†“                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚   â”‚ æ…¢ç—…ä¸“å®¶   â”‚ â”‚ æƒ…æ„Ÿå…³æ€€   â”‚ â”‚ å¥åº·ç®¡å®¶   â”‚ â”‚ ç”Ÿæ´»æ•™ç»ƒ   â”‚      â”‚
â”‚   â”‚            â”‚ â”‚            â”‚ â”‚            â”‚ â”‚            â”‚      â”‚
â”‚   â”‚ - é«˜è¡€å‹   â”‚ â”‚ - å¿ƒç†ç–å¯¼ â”‚ â”‚ - æ—¥å¸¸é—®å€™ â”‚ â”‚ - è¿åŠ¨å»ºè®® â”‚      â”‚
â”‚   â”‚ - ç³–å°¿ç—…   â”‚ â”‚ - æƒ…ç»ªè¯†åˆ« â”‚ â”‚ - å¥åº·æé†’ â”‚ â”‚ - é¥®é£ŸæŒ‡å¯¼ â”‚      â”‚
â”‚   â”‚ - è¡€è„‚å¼‚å¸¸ â”‚ â”‚ - é™ªä¼´èŠå¤© â”‚ â”‚ - ç”¨è¯æé†’ â”‚ â”‚ - ç¡çœ æ”¹å–„ â”‚      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 2.3 å…³é”®ä»£ç ç¤ºä¾‹

```python
# ä½¿ç”¨å¤šæ™ºèƒ½ä½“ç³»ç»Ÿ
from agents import MultiAgentSystem

# åˆå§‹åŒ–
mas = MultiAgentSystem()

# ç”¨æˆ·å¯¹è¯
response = mas.chat(
    user_id="elderly_001",
    message="æˆ‘æœ€è¿‘è¡€å‹æœ‰ç‚¹é«˜ï¼Œæ€ä¹ˆåŠï¼Ÿ"
)

print(response["reply"])
# è¾“å‡º: æ™ºèƒ½ä½“æ ¹æ®é—®é¢˜ç±»å‹è‡ªåŠ¨è·¯ç”±åˆ°"æ…¢ç—…ä¸“å®¶"å›ç­”

# é—®å€™è¯­
greeting = mas.get_greeting(user_id="elderly_001")
print(greeting)
# è¾“å‡º: æ ¹æ®æ—¶é—´å’Œç”¨æˆ·å¥åº·çŠ¶æ€ç”Ÿæˆä¸ªæ€§åŒ–é—®å€™
```

## 2.4 æ™ºèƒ½ä½“èƒ½åŠ›

| æ™ºèƒ½ä½“ | è§¦å‘å…³é”®è¯ | èƒ½åŠ› |
|--------|------------|------|
| æ…¢ç—…ä¸“å®¶ | è¡€å‹ã€è¡€ç³–ã€ç³–å°¿ç—…ã€é«˜è¡€å‹ | æ…¢æ€§ç—…ç®¡ç†å»ºè®® |
| æƒ…æ„Ÿå…³æ€€ | å¿ƒæƒ…ã€éš¾è¿‡ã€ç„¦è™‘ã€å­¤ç‹¬ | å¿ƒç†ç–å¯¼ã€é™ªä¼´ |
| å¥åº·ç®¡å®¶ | åƒè¯ã€æé†’ã€é¢„çº¦ã€ä½“æ£€ | æ—¥å¸¸å¥åº·ç®¡ç† |
| ç”Ÿæ´»æ•™ç»ƒ | è¿åŠ¨ã€é¥®é£Ÿã€ç¡çœ ã€å‡è‚¥ | ç”Ÿæ´»æ–¹å¼æŒ‡å¯¼ |

---

# ä¸‰ã€è¯­éŸ³éƒ¨åˆ† âœ… å·²å®ç°

## 3.1 å½“å‰å®ç°çŠ¶æ€

| åŠŸèƒ½ | çŠ¶æ€ | ä½ç½® |
|------|------|------|
| è¯­éŸ³è¾“å…¥ (ASR) | âœ… å·²å®ç° | SenseVoice + Web Speech API |
| è¯­éŸ³è¾“å‡º (TTS) | âœ… å·²å®ç° | Edge-TTS (5ç§ä¸­æ–‡è¯­éŸ³) |
| è¯­éŸ³å¯¹è¯ | âœ… å·²å®ç° | ASR + LLM + TTS ä¸€ä½“åŒ– |

## 3.2 è¯­éŸ³æ¨¡å—æ–‡ä»¶

### åç«¯ (Python)

| æ–‡ä»¶ | åŠŸèƒ½ |
|------|------|
| `src/health_assessment_system/web_digital_human/voice_api.py` | è¯­éŸ³APIæœåŠ¡ |
| `src/ASR-LLM-TTS-master/` | ASR-LLM-TTS å®Œæ•´é¡¹ç›® |

### å‰ç«¯ (TypeScript)

| æ–‡ä»¶ | åŠŸèƒ½ |
|------|------|
| `src/services/voiceApi.ts` | è¯­éŸ³APIè°ƒç”¨æœåŠ¡ |
| `src/components/ui/VoiceInputButton.tsx` | è¯­éŸ³è¾“å…¥æŒ‰é’®ç»„ä»¶ |

## 3.3 è¯­éŸ³APIç«¯ç‚¹

| ç«¯ç‚¹ | æ–¹æ³• | åŠŸèƒ½ |
|------|------|------|
| `/api/voice/tts` | POST | æ–‡æœ¬è½¬è¯­éŸ³ (Edge-TTS) |
| `/api/voice/asr` | POST | è¯­éŸ³è½¬æ–‡æœ¬ (SenseVoice) |
| `/api/voice/chat` | POST | è¯­éŸ³å¯¹è¯ (ASR+LLM+TTS) |
| `/api/voice/voices` | GET | è·å–å¯ç”¨è¯­éŸ³åˆ—è¡¨ |
| `/api/voice/audio/<file>` | GET | è·å–éŸ³é¢‘æ–‡ä»¶ |

## 3.4 å¯ç”¨è¯­éŸ³

| è¯­éŸ³ID | åç§° |
|--------|------|
| zh-CN-XiaoyiNeural | æ™“ä¼Š (å¥³å£°-æ¸©æŸ”) |
| zh-CN-YunxiNeural | äº‘å¸Œ (ç”·å£°-é˜³å…‰) |
| zh-CN-XiaoxiaoNeural | æ™“æ™“ (å¥³å£°-æ´»æ³¼) |
| zh-CN-YunyangNeural | äº‘æ‰¬ (ç”·å£°-æ–°é—») |
| zh-CN-XiaochenNeural | æ™“è¾° (å¥³å£°-å®¢æœ) |

## 3.5 ä½¿ç”¨ç¤ºä¾‹

### å‰ç«¯è°ƒç”¨

```typescript
import { textToSpeech, speechToText, voiceChat, audioRecorder } from '@/services/voiceApi';

// æ–‡æœ¬è½¬è¯­éŸ³
const result = await textToSpeech("æ‚¨å¥½ï¼Œæˆ‘æ˜¯å¥åº·åŠ©æ‰‹");
if (result.success) {
  playAudio(result.data.audio_url);
}

// å½•éŸ³å¹¶è¯†åˆ«
await audioRecorder.start();
// ... ç”¨æˆ·è¯´è¯ ...
const audioBlob = await audioRecorder.stop();
const asrResult = await speechToText(audioBlob);
console.log("è¯†åˆ«ç»“æœ:", asrResult.data.text);

// è¯­éŸ³å¯¹è¯
const chatResult = await voiceChat(audioBlob);
console.log("AIå›å¤:", chatResult.data.response_text);
playAudio(chatResult.data.audio_url);
```

### åç«¯è°ƒç”¨

```python
from voice_api import text_to_speech, speech_to_text

# æ–‡æœ¬è½¬è¯­éŸ³
audio_file = text_to_speech("æ‚¨å¥½ï¼Œè®°å¾—æŒ‰æ—¶åƒè¯", "zh-CN-XiaoyiNeural")

# è¯­éŸ³è½¬æ–‡æœ¬
text = speech_to_text("recording.wav")
```

## 3.6 è¯­éŸ³äº¤äº’æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         è¯­éŸ³å¯¹è¯æµç¨‹                                 â”‚
â”‚                                                                     â”‚
â”‚   ç”¨æˆ·è¯´è¯                                                          â”‚
â”‚      â†“                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                               â”‚
â”‚   â”‚  SenseVoice     â”‚  â† åç«¯è¯­éŸ³è¯†åˆ« (ASR)                         â”‚
â”‚   â”‚  æˆ– Web Speech  â”‚  â† å‰ç«¯æµè§ˆå™¨è¯†åˆ«                             â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                               â”‚
â”‚            â†“ æ–‡å­—                                                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                               â”‚
â”‚   â”‚ /api/voice/chat â”‚  â† è¯­éŸ³å¯¹è¯API                                â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                               â”‚
â”‚            â†“                                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                               â”‚
â”‚   â”‚ è®¯é£æ˜Ÿç« / LLM  â”‚  â† AIå¤„ç†                                     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                               â”‚
â”‚            â†“ AIå›å¤æ–‡å­—                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                               â”‚
â”‚   â”‚   Edge-TTS      â”‚  â† è¯­éŸ³åˆæˆ (TTS)                             â”‚
â”‚   â”‚   (å¾®è½¯è¯­éŸ³)     â”‚                                               â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                               â”‚
â”‚            â†“ éŸ³é¢‘æ–‡ä»¶                                                â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                               â”‚
â”‚   â”‚  å‰ç«¯æ’­æ”¾éŸ³é¢‘    â”‚  â† ç”¨æˆ·å¬åˆ°å›å¤                               â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

# å››ã€APIæ¥å£æ±‡æ€»

## 4.1 å¥åº·æ•°æ®API

| æ–¹æ³• | è·¯å¾„ | åŠŸèƒ½ |
|------|------|------|
| GET | `/api/health/today` | ä»Šæ—¥å¥åº·æ•°æ® |
| GET | `/api/health/charts` | å›¾è¡¨æ•°æ® |
| GET | `/api/health/heart-rate` | å¿ƒç‡æ•°æ® |
| GET | `/api/health/blood-pressure` | è¡€å‹æ•°æ® |
| GET | `/api/health/sleep` | ç¡çœ æ•°æ® |
| GET | `/api/health/radar` | é›·è¾¾å›¾æ•°æ® |
| POST | `/api/health/assessment` | è¿è¡Œå¥åº·è¯„ä¼° |

## 4.2 æ•°æ®å¤„ç†API

| æ–¹æ³• | è·¯å¾„ | åŠŸèƒ½ |
|------|------|------|
| POST | `/api/data/input` | å•æ¡æ•°æ®è¾“å…¥ |
| POST | `/api/data/batch` | æ‰¹é‡æ•°æ®è¾“å…¥ |
| POST | `/api/data/clean` | æ•°æ®æ¸…æ´— |
| POST | `/api/data/analyze` | æ•°æ®åˆ†æ |
| GET | `/api/data/summary` | æ•°æ®æ‘˜è¦ |

## 4.3 AIå¯¹è¯API

| æ–¹æ³• | è·¯å¾„ | åŠŸèƒ½ |
|------|------|------|
| POST | `/api/chat` | AIå¯¹è¯ |
| GET | `/api/greeting` | è·å–é—®å€™è¯­ |

## 4.4 è¯­éŸ³API (å¾…å®ç°)

| æ–¹æ³• | è·¯å¾„ | åŠŸèƒ½ |
|------|------|------|
| POST | `/api/voice/chat` | è¯­éŸ³å¯¹è¯ |
| GET | `/api/voice/audio/{id}` | è·å–è¯­éŸ³æ–‡ä»¶ |

---

# äº”ã€æ–‡ä»¶æ¸…å•

## 5.1 æ•°æ®å¤„ç† (6ä¸ªæ–‡ä»¶)

```
æ ¸å¿ƒæ–‡ä»¶:
â”œâ”€â”€ core/data_pipeline.py         # æ•°æ®ç®¡é“ (39KB)
â”œâ”€â”€ core/health_data_service.py   # æ•°æ®æœåŠ¡ (28KB)
â”œâ”€â”€ core/database_manager.py      # æ•°æ®åº“ç®¡ç† (7KB)
â”œâ”€â”€ modules/data_preparation.py   # ç‰¹å¾å·¥ç¨‹ (18KB)

æ•°æ®ç”Ÿæˆ:
â”œâ”€â”€ æ•°æ®ç”Ÿæˆ/user_profiles.py     # ç”¨æˆ·ç”»åƒ (16KB)
â”œâ”€â”€ æ•°æ®ç”Ÿæˆ/user_generator.py    # ç”¨æˆ·ç”Ÿæˆ (9KB)
â”œâ”€â”€ æ•°æ®ç”Ÿæˆ/health_generator.py  # æ•°æ®ç”Ÿæˆ (22KB)
â”œâ”€â”€ æ•°æ®ç”Ÿæˆ/generate_all.py      # ä¸€é”®ç”Ÿæˆ (10KB)
```

## 5.2 AIæ™ºèƒ½ä½“ (7ä¸ªæ–‡ä»¶)

```
â”œâ”€â”€ agents/__init__.py             # æ¨¡å—å¯¼å‡º (1KB)
â”œâ”€â”€ agents/base_agent.py           # åŸºç±» (9KB)
â”œâ”€â”€ agents/multi_agent_system.py   # å¤šæ™ºèƒ½ä½“ç³»ç»Ÿ (13KB)
â”œâ”€â”€ agents/agent_coordinator.py    # åè°ƒå™¨ (9KB)
â”œâ”€â”€ agents/chronic_disease_expert.py # æ…¢ç—…ä¸“å®¶ (16KB)
â”œâ”€â”€ agents/emotional_care.py       # æƒ…æ„Ÿå…³æ€€ (15KB)
â”œâ”€â”€ agents/health_butler.py        # å¥åº·ç®¡å®¶ (19KB)
â”œâ”€â”€ agents/lifestyle_coach.py      # ç”Ÿæ´»æ•™ç»ƒ (15KB)
```

## 5.3 å¥åº·è¯„ä¼° (7ä¸ªæ–‡ä»¶)

```
â”œâ”€â”€ modules/assessment_config.py          # è¯„ä¼°é…ç½® (10KB)
â”œâ”€â”€ modules/disease_assessment.py         # ç–¾ç—…è¯„ä¼° (31KB)
â”œâ”€â”€ modules/lifestyle_assessment.py       # ç”Ÿæ´»è¯„ä¼° (23KB)
â”œâ”€â”€ modules/comprehensive_assessment.py   # ç»¼åˆè¯„ä¼° (25KB)
â”œâ”€â”€ modules/indicator_evaluator.py        # æŒ‡æ ‡è¯„ä¼° (12KB)
â”œâ”€â”€ modules/report_generation.py          # æŠ¥å‘Šç”Ÿæˆ (15KB)
â”œâ”€â”€ modules/yangsheng_report_generator.py # å…»ç”ŸæŠ¥å‘Š (62KB)
```

## 5.4 WebæœåŠ¡ (1ä¸ªæ–‡ä»¶)

```
â”œâ”€â”€ web_digital_human/app.py       # Flask API (å«å¥åº·æ•°æ®API)
```

## 5.5 è¯­éŸ³æœåŠ¡ (4ä¸ªæ ¸å¿ƒæ–‡ä»¶)

```
åç«¯:
â”œâ”€â”€ src/health_assessment_system/web_digital_human/voice_api.py  # è¯­éŸ³API (374è¡Œ)
â”œâ”€â”€ src/ASR-LLM-TTS-master/                                       # ASR-LLM-TTSé¡¹ç›®

å‰ç«¯:
â”œâ”€â”€ src/services/voiceApi.ts                    # è¯­éŸ³APIæœåŠ¡ (260è¡Œ)
â”œâ”€â”€ src/components/ui/VoiceInputButton.tsx      # è¯­éŸ³æŒ‰é’®ç»„ä»¶ (90è¡Œ)
```

---

# å…­ã€å¿«é€Ÿå¯åŠ¨

```bash
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd health_assessment_system

# 2. å¯åŠ¨åç«¯æœåŠ¡
python run_web.py
# æœåŠ¡åœ°å€: http://localhost:5000

# 3. ç”Ÿæˆæµ‹è¯•æ•°æ®
cd æ•°æ®ç”Ÿæˆ
python generate_all.py

# 4. æµ‹è¯•API
curl http://localhost:5000/api/health/today?user_id=elderly_001
curl http://localhost:5000/api/greeting?user_id=elderly_001
```

---

# ä¸ƒã€æ¨¡å—å®ŒæˆçŠ¶æ€

| åŠŸèƒ½ | ä¼˜å…ˆçº§ | çŠ¶æ€ |
|------|--------|------|
| æ•°æ®é‡‡é›† | é«˜ | âœ… å·²å®ç° |
| æ•°æ®æ¸…æ´— | é«˜ | âœ… å·²å®ç° |
| å¥åº·è¯„ä¼° | é«˜ | âœ… å·²å®ç° |
| AIæ™ºèƒ½ä½“ | é«˜ | âœ… å·²å®ç° |
| è¯­éŸ³è¾“å…¥ (ASR) | é«˜ | âœ… å·²å®ç° (SenseVoice) |
| è¯­éŸ³è¾“å‡º (TTS) | é«˜ | âœ… å·²å®ç° (Edge-TTS) |
| è¯­éŸ³å¯¹è¯ | é«˜ | âœ… å·²å®ç° |
| æ•°æ®åº“æŒä¹…åŒ– | ä¸­ | ğŸ”² å¾…å®Œå–„ |
| ä¼ æ„Ÿå™¨æ•°æ®æ¥å…¥ | ä¸­ | ğŸ”² å¾…å®ç° |
| å¥åº·æŠ¥å‘ŠPDFå¯¼å‡º | ä½ | ğŸ”² å¾…å®ç° |
