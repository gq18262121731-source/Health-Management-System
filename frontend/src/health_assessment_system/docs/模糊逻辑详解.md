# æ¨¡ç³Šé€»è¾‘ç®—æ³•è¯¦è§£ - è¿è¡Œæœºåˆ¶ä¸è§„åˆ™åº“

## ğŸ¯ æ¨¡ç³Šé€»è¾‘åœ¨ç³»ç»Ÿä¸­çš„ä½œç”¨

### ä¸ºä»€ä¹ˆéœ€è¦æ¨¡ç³Šé€»è¾‘ï¼Ÿ

**ä¼ ç»Ÿç¡¬é˜ˆå€¼çš„é—®é¢˜**ï¼š
```
è¡€å‹ < 140 â†’ æ­£å¸¸ âœ“
è¡€å‹ â‰¥ 140 â†’ é«˜è¡€å‹ âœ—

é—®é¢˜ï¼š138å’Œ141çœŸçš„å·®åˆ«å¾ˆå¤§å—ï¼Ÿ
```

**æ¨¡ç³Šé€»è¾‘çš„è§£å†³æ–¹æ¡ˆ**ï¼š
```
è¡€å‹ 135ï¼š70%æ­£å¸¸ + 30%åé«˜
è¡€å‹ 145ï¼š10%åé«˜ + 90%é«˜è¡€å‹
```

---

## ğŸ”§ ç³»ç»Ÿå®ç°æ–¹å¼

### ä»£ç ä½ç½®
```
modules/disease_assessment.py
â”œâ”€â”€ SimplifiedFuzzyLogic (ç¬¬84-120è¡Œ)
â”œâ”€â”€ HypertensionAssessor (ç¬¬122-407è¡Œ)
â””â”€â”€ DiabetesAssessor (ç¬¬410-500è¡Œ)
```

### æ ¸å¿ƒå‡½æ•°

```python
class SimplifiedFuzzyLogic:
    """ç®€åŒ–çš„æ¨¡ç³Šé€»è¾‘å®ç°"""
    
    @staticmethod
    def trimf(x: float, params: List[float]) -> float:
        """ä¸‰è§’éš¶å±åº¦å‡½æ•°"""
        a, b, c = params
        if x <= a or x >= c:
            return 0.0
        elif a < x <= b:
            return (x - a) / (b - a)
        else:
            return (c - x) / (c - b)
    
    @staticmethod
    def trapmf(x: float, params: List[float]) -> float:
        """æ¢¯å½¢éš¶å±åº¦å‡½æ•°"""
        a, b, c, d = params
        if x <= a or x >= d:
            return 0.0
        elif a < x <= b:
            return (x - a) / (b - a)
        elif b < x <= c:
            return 1.0
        else:
            return (d - x) / (d - c)
```

---

## ğŸ“‹ è§„åˆ™åº“è¯¦è§£

### è§„åˆ™åº“1ï¼šè¡€å‹åˆ†çº§è§„åˆ™

```python
# ä½ç½®ï¼šmodules/disease_assessment.py#129-143

sbp_thresholds = {
    'normal': (0, 120),        # æ­£å¸¸
    'elevated': (120, 140),    # æ­£å¸¸é«˜å€¼
    'stage1': (140, 160),      # 1çº§é«˜è¡€å‹
    'stage2': (160, 180),      # 2çº§é«˜è¡€å‹
    'stage3': (180, 300)       # 3çº§é«˜è¡€å‹
}
```

**åˆ†çº§å‡½æ•°**ï¼š
```python
def _classify_sbp(self, sbp: float) -> str:
    if sbp < 120:
        return "æ­£å¸¸"
    elif sbp < 140:
        return "æ­£å¸¸é«˜å€¼"
    elif sbp < 160:
        return "1çº§é«˜è¡€å‹"
    elif sbp < 180:
        return "2çº§é«˜è¡€å‹"
    else:
        return "3çº§é«˜è¡€å‹"
```

---

### è§„åˆ™åº“2ï¼šæ§åˆ¶è´¨é‡è¯„åˆ†è§„åˆ™

```python
# ä½ç½®ï¼šmodules/disease_assessment.py#266-305

æ§åˆ¶è´¨é‡è¯„åˆ† = è¾¾æ ‡ç‡å¾—åˆ†(40%) + ç¨³å®šæ€§å¾—åˆ†(30%) + è¡€å‹æ°´å¹³å¾—åˆ†(30%)
```

#### å­è§„åˆ™2.1ï¼šè¾¾æ ‡ç‡å¾—åˆ†ï¼ˆ0-40åˆ†ï¼‰
```python
compliance_score = compliance_rate * 40
```

#### å­è§„åˆ™2.2ï¼šç¨³å®šæ€§å¾—åˆ†ï¼ˆ0-30åˆ†ï¼‰
```python
if cv < 0.1:
    stability_score = 30      # ç¨³å®š
elif cv < 0.15:
    stability_score = 20      # è½»åº¦æ³¢åŠ¨
elif cv < 0.2:
    stability_score = 10      # ä¸­åº¦æ³¢åŠ¨
else:
    stability_score = 0       # ä¸¥é‡æ³¢åŠ¨
```

#### å­è§„åˆ™2.3ï¼šè¡€å‹æ°´å¹³å¾—åˆ†ï¼ˆ0-30åˆ†ï¼‰
```python
if sbp < 120 and dbp < 80:
    bp_score = 30             # æ­£å¸¸
elif sbp < 140 and dbp < 90:
    bp_score = 20             # æ­£å¸¸é«˜å€¼
elif sbp < 160 and dbp < 100:
    bp_score = 10             # 1çº§é«˜è¡€å‹
else:
    bp_score = 0              # 2çº§åŠä»¥ä¸Š
```

---

### è§„åˆ™åº“3ï¼šé£é™©è¯„åˆ†è§„åˆ™

```python
# ä½ç½®ï¼šmodules/disease_assessment.py#307-350

é£é™©è¯„åˆ† = è¡€å‹æ°´å¹³é£é™©(40%) + è¾¾æ ‡ç‡é£é™©(25%) + æ³¢åŠ¨æ€§é£é™©(20%) + è¶‹åŠ¿é£é™©(15%)
```

#### å­è§„åˆ™3.1ï¼šè¡€å‹æ°´å¹³é£é™©ï¼ˆ0-40åˆ†ï¼‰
```python
if sbp >= 180 or dbp >= 110:
    risk_score += 40          # 3çº§é«˜è¡€å‹
elif sbp >= 160 or dbp >= 100:
    risk_score += 30          # 2çº§é«˜è¡€å‹
elif sbp >= 140 or dbp >= 90:
    risk_score += 20          # 1çº§é«˜è¡€å‹
elif sbp >= 130 or dbp >= 85:
    risk_score += 10          # æ­£å¸¸é«˜å€¼åé«˜
```

#### å­è§„åˆ™3.2ï¼šè¾¾æ ‡ç‡é£é™©ï¼ˆ0-25åˆ†ï¼‰
```python
risk_score += (1 - compliance_rate) * 25
```

#### å­è§„åˆ™3.3ï¼šæ³¢åŠ¨æ€§é£é™©ï¼ˆ0-20åˆ†ï¼‰
```python
if cv >= 0.2:
    risk_score += 20          # ä¸¥é‡æ³¢åŠ¨
elif cv >= 0.15:
    risk_score += 15          # ä¸­åº¦æ³¢åŠ¨
elif cv >= 0.1:
    risk_score += 10          # è½»åº¦æ³¢åŠ¨
```

#### å­è§„åˆ™3.4ï¼šè¶‹åŠ¿é£é™©ï¼ˆ0-15åˆ†ï¼‰
```python
if baseline_deviation > 10:
    risk_score += 15          # æ˜¾è‘—å‡é«˜
elif baseline_deviation > 5:
    risk_score += 10          # ä¸­åº¦å‡é«˜
elif baseline_deviation > 0:
    risk_score += 5           # è½»åº¦å‡é«˜
```

---

### è§„åˆ™åº“4ï¼šçŠ¶æ€åˆ¤å®šè§„åˆ™

```python
# ä½ç½®ï¼šmodules/disease_assessment.py#352-372

# æ§åˆ¶çŠ¶æ€åˆ¤å®š
if control_score >= 80:
    return "ä¼˜ç§€"
elif control_score >= 60:
    return "è‰¯å¥½"
elif control_score >= 40:
    return "ä¸€èˆ¬"
else:
    return "è¾ƒå·®"

# é£é™©ç­‰çº§åˆ¤å®š
if risk_score < 25:
    return "ä½é£é™©"
elif risk_score < 50:
    return "ä¸­é£é™©"
elif risk_score < 75:
    return "é«˜é£é™©"
else:
    return "æé«˜é£é™©"
```

---

## ğŸ”„ è¿è¡Œæµç¨‹

```
è¾“å…¥ï¼šè¡€å‹æ•°æ®ï¼ˆ30å¤©ï¼‰
    â†“
ã€æ­¥éª¤1ã€‘æ•°æ®é¢„å¤„ç†
â€¢ è®¡ç®—å‡å€¼ã€æ ‡å‡†å·®ã€CV
â€¢ è®¡ç®—è¾¾æ ‡ç‡
    â†“
ã€æ­¥éª¤2ã€‘åº”ç”¨è§„åˆ™1ï¼šè¡€å‹åˆ†çº§
â€¢ ç¡®å®šè¡€å‹ç­‰çº§
    â†“
ã€æ­¥éª¤3ã€‘åº”ç”¨è§„åˆ™2ï¼šæ§åˆ¶è´¨é‡è¯„åˆ†
â€¢ è¾¾æ ‡ç‡å¾—åˆ† + ç¨³å®šæ€§å¾—åˆ† + è¡€å‹æ°´å¹³å¾—åˆ†
    â†“
ã€æ­¥éª¤4ã€‘åº”ç”¨è§„åˆ™3ï¼šé£é™©è¯„åˆ†
â€¢ è¡€å‹é£é™© + è¾¾æ ‡ç‡é£é™© + æ³¢åŠ¨é£é™© + è¶‹åŠ¿é£é™©
    â†“
ã€æ­¥éª¤5ã€‘åº”ç”¨è§„åˆ™4ï¼šçŠ¶æ€åˆ¤å®š
â€¢ ç¡®å®šæ§åˆ¶çŠ¶æ€å’Œé£é™©ç­‰çº§
    â†“
ã€æ­¥éª¤6ã€‘ç”Ÿæˆå…³é”®å‘ç°
â€¢ æä¾›å¯è§£é‡Šæ€§ä¾æ®
    â†“
è¾“å‡ºï¼šè¯„ä¼°ç»“æœ
```

---

## ğŸ“ å®é™…æ¡ˆä¾‹

### æ¡ˆä¾‹ï¼šæå¥¶å¥¶çš„è¾¹ç•Œè¡€å‹

**è¾“å…¥æ•°æ®**ï¼š
```python
sbp_mean = 138.5          # å¹³å‡æ”¶ç¼©å‹
dbp_mean = 86.2           # å¹³å‡èˆ’å¼ å‹
compliance_rate = 0.75    # è¾¾æ ‡ç‡75%
cv = 0.08                 # å˜å¼‚ç³»æ•°
baseline_deviation = 3.5  # ç›¸æ¯”åŸºçº¿å‡é«˜3.5
```

**è¿è¡Œè¿‡ç¨‹**ï¼š

**æ­¥éª¤1ï¼šåˆ†çº§**
```
138.5 < 140 â†’ "æ­£å¸¸é«˜å€¼"
```

**æ­¥éª¤2ï¼šæ§åˆ¶è´¨é‡è¯„åˆ†**
```
è¾¾æ ‡ç‡å¾—åˆ† = 0.75 Ã— 40 = 30åˆ†
ç¨³å®šæ€§å¾—åˆ† = 30åˆ† (cv<0.1)
è¡€å‹æ°´å¹³å¾—åˆ† = 20åˆ† (120<sbp<140)
æ€»åˆ† = 80åˆ†
```

**æ­¥éª¤3ï¼šé£é™©è¯„åˆ†**
```
è¡€å‹æ°´å¹³é£é™© = 10åˆ† (130<sbp<140)
è¾¾æ ‡ç‡é£é™© = 6.25åˆ† ((1-0.75)Ã—25)
æ³¢åŠ¨æ€§é£é™© = 0åˆ† (cv<0.1)
è¶‹åŠ¿é£é™© = 5åˆ† (0<deviation<5)
æ€»åˆ† = 21.25åˆ†
```

**æ­¥éª¤4ï¼šçŠ¶æ€åˆ¤å®š**
```
æ§åˆ¶çŠ¶æ€ = "ä¼˜ç§€" (80åˆ†â‰¥80)
é£é™©ç­‰çº§ = "ä½é£é™©" (21.25<25)
```

**è¾“å‡ºç»“æœ**ï¼š
```
â€¢ æ§åˆ¶çŠ¶æ€ï¼šä¼˜ç§€ (80åˆ†)
â€¢ é£é™©ç­‰çº§ï¼šä½é£é™© (21.25åˆ†)
â€¢ è¡€å‹åˆ†çº§ï¼šæ­£å¸¸é«˜å€¼
â€¢ å…³é”®å‘ç°ï¼š
  - è¡€å‹è¾¾æ ‡ç‡ä¸€èˆ¬ï¼ˆ75%ï¼‰ï¼Œéœ€è¦æ”¹å–„
  - ç›¸æ¯”åŸºçº¿å‡é«˜3.5mmHgï¼Œå‘ˆè½»åº¦ä¸Šå‡è¶‹åŠ¿
â€¢ å»ºè®®ï¼š
  - åŠ å¼ºè¡€å‹ç›‘æµ‹
  - æ³¨æ„é¥®é£Ÿæ§åˆ¶
  - ä¿æŒè§„å¾‹è¿åŠ¨
```

---

## ğŸ¯ è§„åˆ™åº“æ€»ç»“

### å®Œæ•´è§„åˆ™ä½“ç³»

```
é«˜è¡€å‹è¯„ä¼°è§„åˆ™åº“
â”œâ”€â”€ è§„åˆ™1ï¼šè¡€å‹åˆ†çº§ï¼ˆ5çº§ï¼‰
â”œâ”€â”€ è§„åˆ™2ï¼šæ§åˆ¶è´¨é‡è¯„åˆ†ï¼ˆ3ç»´åº¦ï¼Œæƒé‡4:3:3ï¼‰
â”œâ”€â”€ è§„åˆ™3ï¼šé£é™©è¯„åˆ†ï¼ˆ4ç»´åº¦ï¼Œæƒé‡40:25:20:15ï¼‰
â”œâ”€â”€ è§„åˆ™4ï¼šçŠ¶æ€åˆ¤å®šï¼ˆ4çº§æ§åˆ¶çŠ¶æ€ï¼Œ4çº§é£é™©ç­‰çº§ï¼‰
â””â”€â”€ è§„åˆ™6ï¼šå…³é”®å‘ç°ç”Ÿæˆï¼ˆå¤šæ¡è§„åˆ™ï¼‰
```

### è§„åˆ™ç‰¹ç‚¹

âœ… **åŸºäºåŒ»å­¦æŒ‡å—**ï¼šå‚è€ƒä¸­å›½é«˜è¡€å‹é˜²æ²»æŒ‡å—  
âœ… **å¤šç»´åº¦è¯„ä¼°**ï¼šä¸ä»…çœ‹æ•°å€¼ï¼Œè¿˜çœ‹è¾¾æ ‡ç‡ã€ç¨³å®šæ€§ã€è¶‹åŠ¿  
âœ… **æƒé‡ç§‘å­¦**ï¼šæ ¹æ®ä¸´åºŠé‡è¦æ€§ç¡®å®š  
âœ… **å¯è§£é‡Šæ€§å¼º**ï¼šæ¯ä¸ªç»“è®ºéƒ½æœ‰ä¾æ®  

---

## ğŸ’¡ æ¨¡ç³Šé€»è¾‘çš„ä¼˜åŠ¿

1. **å¤„ç†è¾¹ç•Œé—®é¢˜**ï¼š138å’Œ141ä¸å†æ˜¯æˆªç„¶ä¸åŒ
2. **ç»¼åˆå¤šç»´åº¦**ï¼šè¾¾æ ‡ç‡+ç¨³å®šæ€§+æ°´å¹³+è¶‹åŠ¿
3. **ç»†è‡´è¯„åˆ†**ï¼š0-100è¿ç»­è¯„åˆ†ï¼Œè€Œéç®€å•åˆ†ç±»
4. **å¯è§£é‡Šæ€§**ï¼šæ¯ä¸ªè¯„åˆ†éƒ½æœ‰æ˜ç¡®ä¾æ®
5. **ç¬¦åˆåŒ»å­¦å®è·µ**ï¼šåŒ»ç”Ÿä¹Ÿæ˜¯ç»¼åˆåˆ¤æ–­

---

**å®Œæ•´ä»£ç ä½ç½®**ï¼š`modules/disease_assessment.py`
