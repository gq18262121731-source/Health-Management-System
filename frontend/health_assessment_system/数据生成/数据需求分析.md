# 数据生成需求分析

## 一、需要造的数据类型

### 1. 用户基础信息 (user_profile)

| 字段 | 类型 | 说明 | 示例 |
|------|------|------|------|
| user_id | string | 用户唯一标识 | elderly_001 |
| name | string | 姓名 | 张秀英 |
| gender | string | 性别 | 女 |
| age | int | 年龄 | 68 |
| height | float | 身高(cm) | 158 |
| weight | float | 基础体重(kg) | 62.5 |
| medical_history | list | 既往病史 | ["高血压", "糖尿病前期"] |
| medications | list | 用药情况 | ["降压药"] |
| emergency_contact | string | 紧急联系人 | 张明(儿子) |

---

### 2. 健康监测数据

#### 2.1 血压数据 (blood_pressure)

| 字段 | 类型 | 范围 | 单位 |
|------|------|------|------|
| systolic | int | 70-200 | mmHg |
| diastolic | int | 40-130 | mmHg |
| pulse | int | 50-120 | 次/分 |
| measurement_time | datetime | - | - |
| position | string | sitting/lying | - |
| arm | string | left/right | - |

**生成规则：**
- 正常人：收缩压 110-130，舒张压 70-85
- 高血压患者：收缩压 135-160，舒张压 85-100
- 晨起略高，下午略低
- 添加 5-10% 随机波动

---

#### 2.2 血糖数据 (glucose)

| 字段 | 类型 | 范围 | 单位 |
|------|------|------|------|
| value | float | 2.0-30.0 | mmol/L |
| test_type | string | fasting/postprandial | - |
| meal_time | string | breakfast/lunch/dinner | - |
| measurement_time | datetime | - | - |

**生成规则：**
- 正常空腹：4.0-6.1
- 正常餐后2h：<7.8
- 糖尿病前期空腹：6.1-7.0
- 糖尿病餐后：>11.1
- 餐后血糖比空腹高 2-4 mmol/L

---

#### 2.3 心率数据 (heart_rate)

| 字段 | 类型 | 范围 | 单位 |
|------|------|------|------|
| value | int | 35-200 | bpm |
| is_resting | bool | - | - |
| activity_level | string | rest/light/moderate/intense | - |
| measurement_time | datetime | - | - |

**生成规则：**
- 静息心率：60-80 bpm
- 轻度活动：80-100 bpm
- 中度活动：100-120 bpm
- 睡眠时：50-65 bpm
- 老年人基础心率偏低

---

#### 2.4 睡眠数据 (sleep)

| 字段 | 类型 | 范围 | 单位 |
|------|------|------|------|
| duration | float | 0-16 | 小时 |
| deep_sleep | float | 0-4 | 小时 |
| light_sleep | float | 0-8 | 小时 |
| rem_sleep | float | 0-3 | 小时 |
| awake_times | int | 0-10 | 次 |
| sleep_time | time | - | - |
| wake_time | time | - | - |
| quality_score | int | 0-100 | - |

**生成规则：**
- 总时长：6-9小时
- 深睡占比：15-25%
- 浅睡占比：50-60%
- REM占比：20-25%
- 老年人深睡减少，夜醒次数增多
- 周末可能晚睡晚起

---

#### 2.5 运动/步数数据 (steps)

| 字段 | 类型 | 范围 | 单位 |
|------|------|------|------|
| value | int | 0-30000 | 步 |
| distance | float | 0-20 | km |
| calories | int | 0-1000 | kcal |
| active_minutes | int | 0-180 | 分钟 |
| floors | int | 0-50 | 层 |

**生成规则：**
- 久坐人群：2000-4000 步/天
- 普通老年人：4000-8000 步/天
- 活跃老年人：8000-12000 步/天
- 周末活动量可能减少
- 雨天/极端天气活动量减少

---

#### 2.6 体重数据 (weight)

| 字段 | 类型 | 范围 | 单位 |
|------|------|------|------|
| value | float | 30-150 | kg |
| body_fat | float | 5-50 | % |
| muscle_mass | float | 20-60 | kg |
| water_ratio | float | 40-70 | % |
| bone_mass | float | 1-5 | kg |
| bmi | float | 15-40 | - |

**生成规则：**
- 日波动：±0.5kg
- 周波动：±1kg
- 早晨比晚间轻 0.5-1kg
- BMI = 体重 / 身高²

---

#### 2.7 体温数据 (temperature)

| 字段 | 类型 | 范围 | 单位 |
|------|------|------|------|
| value | float | 35.0-42.0 | °C |
| measurement_site | string | oral/armpit/forehead | - |

**生成规则：**
- 正常：36.0-37.2°C
- 腋下比口腔低 0.3-0.5°C
- 下午略高于早晨
- 日波动 0.3-0.5°C

---

#### 2.8 血氧数据 (spo2)

| 字段 | 类型 | 范围 | 单位 |
|------|------|------|------|
| value | int | 70-100 | % |
| perfusion_index | float | 0.1-10 | % |

**生成规则：**
- 正常：96-99%
- 轻度缺氧：93-95%
- 中度缺氧：90-93%
- 老年人可能偏低 1-2%

---

## 二、用户画像设计

### 需要生成 5 类典型用户：

| 画像 | 年龄 | 健康状况 | 特征 |
|------|------|----------|------|
| **健康老人** | 65 | 无慢病 | 指标正常，规律作息 |
| **高血压患者** | 70 | 1级高血压 | 血压偏高，服药中 |
| **糖尿病前期** | 68 | 血糖偏高 | 空腹血糖 6.1-7.0 |
| **亚健康老人** | 72 | 多项边缘 | 睡眠差，运动少 |
| **高风险老人** | 75 | 多病共存 | 血压+血糖+血脂异常 |

---

## 三、数据生成策略

### 3.1 时间维度

```
├── 近 30 天详细数据（每日多次测量）
├── 近 90 天汇总数据（每日 1 次）
└── 近 1 年月度趋势（每月均值）
```

### 3.2 数据规律

```
日内规律：
├── 血压：晨峰效应（6-10点较高）
├── 心率：睡眠时最低，活动时升高
├── 血糖：餐后 1-2 小时达峰值
└── 体温：下午 14-18 点最高

周规律：
├── 周末活动量可能减少
├── 作息时间可能推迟
└── 饮食可能不规律

季节规律：
├── 冬季血压偏高
├── 夏季心率偏快
└── 换季时数据波动大
```

### 3.3 异常值设计

| 异常类型 | 比例 | 用途 |
|----------|------|------|
| 测量错误 | 1% | 测试清洗能力 |
| 生理异常 | 3% | 测试预警功能 |
| 设备故障 | 0.5% | 测试容错能力 |
| 缺失数据 | 2% | 测试插值能力 |

---

## 四、输出格式

### 4.1 JSON 格式（API 友好）

```json
{
  "user_id": "elderly_001",
  "records": [
    {
      "data_type": "blood_pressure",
      "timestamp": "2024-12-01T08:30:00",
      "values": {"systolic": 135, "diastolic": 85, "pulse": 72}
    }
  ]
}
```

### 4.2 CSV 格式（分析友好）

```csv
user_id,data_type,timestamp,value1,value2,value3
elderly_001,blood_pressure,2024-12-01 08:30:00,135,85,72
```

### 4.3 SQL 格式（数据库导入）

```sql
INSERT INTO health_record (user_id, data_type, timestamp, systolic, diastolic)
VALUES ('elderly_001', 'blood_pressure', '2024-12-01 08:30:00', 135, 85);
```

---

## 五、生成数量规划

| 用户数 | 天数 | 数据类型 | 每类每天记录数 | 总记录数 |
|--------|------|----------|---------------|---------|
| 5 | 30 | 8 | 平均 3 | **3,600** |
| 10 | 90 | 8 | 平均 2 | **14,400** |
| 50 | 365 | 8 | 平均 1 | **146,000** |

---

## 六、下一步行动

1. **创建用户画像生成器** - 生成不同类型的模拟用户
2. **创建时序数据生成器** - 按规律生成各类健康数据
3. **添加噪声和异常值** - 模拟真实数据特征
4. **数据验证器** - 确保生成数据符合业务规则
5. **导出工具** - 支持 JSON/CSV/SQL 多格式导出
